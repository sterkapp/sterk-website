---
import { Image } from 'astro:assets';
import ContentLayout from '../layouts/content-layout.astro';
import Features from '../components/features.astro';
import heroSvg  from '../assets/hero.svg';
import Appstore from '../components/appstore.astro';
import { fadeUp } from '../../animations';
import Layout from '../layouts/layout.astro';
---

<ContentLayout>
	<main class="items-center flex flex-col space-y-8">
		<div class="fixed left-0 top-0 z-[-10] h-screen w-screen">
			<canvas id="canvas3d" class="w-full h-full"/>
		</div>
		<div id="part1" class="h-screen w-full flex flex-col items-center">
			<h1 class="text-blue font-bold text-9xl motion-opacity-in-0 -motion-translate-y-in-50">Sterk.</h1>
			<div class="max-w-prose">
				<p class="text-gray-700 text-2xl motion-opacity-in-0 -motion-translate-y-in-50 motion-delay-300">Workout tracking made easy.</p>
			</div>
			<Appstore />
		</div>
		<div id="part2" class="h-screen max-w-screen-lg flex justify-end">
			<div class="w-1/2 justify-center items-center flex flex-col space-y-4">
				<h2 class="text-[48px]/[48px] font-bold"  data-aos="fade-up" data-aos-easing="ease-out-cubic" data-aos-delay="200">Easily search for the exercise you need</h2>
				<p class="text-gray-700 text-[32px]/8"  data-aos="fade-up" data-aos-easing="ease-out-cubic" data-aos-delay="200">Search for an exercise using either labels or a classic searchbar.</p>
			</div>
		</div>
		<div id="part3" class="h-screen max-w-screen-lg flex justify-start p-16 rounded-lg">
			<div class="w-1/2 justify-center items-center flex flex-col space-y-4">
				<h2 class="text-[48px]/[48px] font-bold"  data-aos="fade-up" data-aos-easing="ease-out-cubic" data-aos-delay="200">View your exercise statistics</h2>
				<p class="text-gray-700 text-[32px]/8"  data-aos="fade-up" data-aos-easing="ease-out-cubic" data-aos-delay="200">Analyze your reps, weight, and trends to maximize perfomance.</p>
			</div>
		</div>
		<Appstore />
	</main>
	<script>
		import { Application } from '@splinetool/runtime';
		import gsap from 'gsap';
		import { ScrollTrigger } from 'gsap/ScrollTrigger';

		gsap.registerPlugin(ScrollTrigger);

		function initialize3DCanvas() {
			const canvas = document.getElementById('canvas3d');
			const screenHeight = window.innerHeight;
			const app = new Application(canvas);
			app.load('https://prod.spline.design/ugzWXXGhlB9gMu30/scene.splinecode').then(() => {
				const iphone = app.findObjectByName("Exercises");
				const iphone2 = app.findObjectByName("Statistics");
				if (!iphone || !iphone2) {
					throw new Error('Could not find object');
				}

				gsap.set(iphone.position, { y: -200});
				gsap.set(iphone2.position, { y: -200 });

				gsap.timeline({
					scrollTrigger: {
						trigger: "#part1",
						start: 'top center',
						end: 'bottom center',
						scrub: 1,
					}
				})
				.to(iphone.rotation, { x: 0, y: 0, z: 0 }, .4)
				.to(iphone2.rotation, { x: 0, y: 0, z: 0 }, '<')
				.to(iphone.position, { y: 0, x: -185 }, '<')
				.to(iphone2.position, { y: -screenHeight, x: 170 }, '<')
				.to(iphone.scale, { x: 0.8, y: 0.8, z: 0.8 }, '<')
				.to(iphone2.scale, { x: 0.8, y: 0.8, z: 0.8 }, '<')

				gsap.timeline({
					scrollTrigger: {
						trigger: "#part3",
						start: 'top center',
						end: 'center center',
						scrub: 1, 
					}
				})
				.to(iphone.position, { x: 185 })
				.to(iphone.rotation, { x: 0, y: 2 * Math.PI, z: 0 }, 0)
			});

		}

		document.addEventListener("astro:page-load", initialize3DCanvas);
	</script>
</ContentLayout>
