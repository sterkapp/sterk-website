---
import { Image } from 'astro:assets';
import ContentLayout from '../layouts/content-layout.astro';
import Features from '../components/features.astro';
import heroSvg  from '../assets/hero.svg';
import Appstore from '../components/appstore.astro';
import { fadeUp } from '../../animations';
---

<ContentLayout>
	<main class="p-4 flex flex-col items-center">
		<h1 class="text-blue font-bold text-9xl motion-opacity-in-0 -motion-translate-y-in-50">Sterk.</h1>
		<div class="max-w-prose">
			<p class="text-gray-700 text-2xl motion-opacity-in-0 -motion-translate-y-in-50 motion-delay-300">Workout tracking made easy.</p>
		</div>
		<Appstore />
		<div class="h-screen max-w-screen-lg w-full motion-opacity-in-0 motion-translate-y-in-50 motion-delay-300">
			<canvas id="canvas3d"/>
		</div>
		<Features />
		<Appstore />
	</main>
	<script>
		import { Application } from '@splinetool/runtime';
		import gsap from 'gsap';
		import { ScrollTrigger } from 'gsap/ScrollTrigger';

		gsap.registerPlugin(ScrollTrigger);

		function initialize3DCanvas() {
			const canvas = document.getElementById('canvas3d');
			const app = new Application(canvas);
			app.load('https://prod.spline.design/ugzWXXGhlB9gMu30/scene.splinecode').then(() => {
				const iphone = app.findObjectByName("Exercises");
				const iphone2 = app.findObjectByName("Statistics");
				if (!iphone || !iphone2) {
					throw new Error('Could not find object');
				}

				gsap.timeline({
					scrollTrigger: {
						trigger: "#canvas3d",
						start: 'top center',
						end: 'center center',
						scrub: 1, // Adjust scrub value to slow down the animation
					}
				})
				.to(iphone.rotation, { y: 0 }, 0)
				.to(iphone2.rotation, { y: .5, z: -0.1 }, 0)
				.to(iphone.scale, { x: 1.2, y: 1.2, z: 1.2 }, 0)
				.to(iphone2.scale, { x: 1.2, y: 1.2, z: 1.2 }, 0);
			});
		}

		document.addEventListener("astro:page-load", initialize3DCanvas);
	</script>
</ContentLayout>
